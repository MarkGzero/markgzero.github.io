<!-- Left Sidebar Navigation -->
<div id="left-sidebar" class="left-sidebar">
  <div class="sidebar-header">
    <h4><i class="fa fa-archive"></i> Archive</h4>
    <button class="sidebar-close" onclick="closeSidebar()">&times;</button>
  </div>
  
  <div class="sidebar-content">
    <!-- Archive by Month -->
    {% assign posts_by_month = site.posts | group_by_exp: "post", "post.date | date: '%Y-%m'" %}
    {% if posts_by_month.size > 0 %}
    <div class="sidebar-section">
      <ul class="sidebar-list archive-list">
        {% for month in posts_by_month %}
          {% assign month_name = month.name | date: "%B %Y" %}
          <li>
            <a href="#" class="archive-link" data-month="{{ month.name }}">
              {{ month_name }}
              <span class="post-count">({{ month.items.size }})</span>
            </a>
            <div class="month-posts" id="month-{{ month.name }}" style="display: none;">
              {% for post in month.items %}
                <a href="{{ post.url | relative_url }}" class="month-post-link" title="{{ post.title }}">
                  <span class="post-date">{{ post.date | date: "%d" }}</span>
                  {{ post.title }}
                </a>
              {% endfor %}
            </div>
          </li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}
  </div>
</div>

<!-- Sidebar Toggle Button -->
<button id="sidebar-toggle" class="sidebar-toggle" onclick="toggleSidebar()" title="Open archive menu">
  <i class="fa fa-archive"></i>
</button>

<!-- Sidebar Overlay -->
<div id="sidebar-overlay" class="sidebar-overlay" onclick="closeSidebar()"></div>

<script>
function toggleSidebar() {
  const sidebar = document.getElementById('left-sidebar');
  const overlay = document.getElementById('sidebar-overlay');
  const toggle = document.getElementById('sidebar-toggle');
  
  if (sidebar.classList.contains('open')) {
    closeSidebar();
  } else {
    sidebar.classList.add('open');
    overlay.classList.add('active');
    toggle.style.left = '260px';
  }
}

function closeSidebar() {
  const sidebar = document.getElementById('left-sidebar');
  const overlay = document.getElementById('sidebar-overlay');
  const toggle = document.getElementById('sidebar-toggle');
  
  sidebar.classList.remove('open');
  overlay.classList.remove('active');
  toggle.style.left = '20px';
}

function scrollToTop() {
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
  closeSidebar();
}

// Archive functionality
document.addEventListener('DOMContentLoaded', function() {
  const archiveLinks = document.querySelectorAll('.archive-link');
  archiveLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const month = this.dataset.month;
      const monthPosts = document.getElementById('month-' + month);
      
      // Toggle visibility
      if (monthPosts.style.display === 'none') {
        monthPosts.style.display = 'block';
        this.classList.add('expanded');
      } else {
        monthPosts.style.display = 'none';
        this.classList.remove('expanded');
      }
    });
  });
});

// Close sidebar when pressing Escape key
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    closeSidebar();
  }
});
</script>