<!-- Left Sidebar Navigation -->
<div id="left-sidebar" class="left-sidebar">
  <div class="sidebar-header">
    <h4><i class="fa fa-bars"></i> Quick Nav</h4>
    <button class="sidebar-close" onclick="closeSidebar()">&times;</button>
  </div>
  
  <div class="sidebar-content">
    <!-- Recent Posts -->
    <div class="sidebar-section">
      <h5><i class="fa fa-clock-o"></i> Recent Posts</h5>
      <ul class="sidebar-list">
        {% assign recent_posts = site.posts | limit: 5 %}
        {% for post in recent_posts %}
          <li>
            <a href="{{ post.url | relative_url }}" title="{{ post.title }}">
              <span class="post-date">{{ post.date | date: "%m/%d" }}</span>
              {{ post.title | truncate: 30 }}
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>

    <!-- Categories/Tags -->
    {% assign post_tags = site.posts | map: 'tags' | join: ',' | split: ',' | uniq | sort %}
    {% if post_tags.size > 0 %}
    <div class="sidebar-section">
      <h5><i class="fa fa-tags"></i> Tags</h5>
      <div class="tag-cloud">
        {% for tag in post_tags limit: 10 %}
          {% unless tag == "" %}
            {% assign tag_posts = site.posts | where_exp: "post", "post.tags contains tag" %}
            <a href="#" class="tag-link" data-tag="{{ tag }}" title="{{ tag_posts.size }} posts">
              {{ tag }}
              <span class="tag-count">{{ tag_posts.size }}</span>
            </a>
          {% endunless %}
        {% endfor %}
      </div>
    </div>
    {% endif %}

    <!-- Quick Links -->
    <div class="sidebar-section">
      <h5><i class="fa fa-external-link"></i> Quick Links</h5>
      <ul class="sidebar-list">
        <li><a href="{{ '/' | relative_url }}"><i class="fa fa-home"></i> Home</a></li>
        <li><a href="{{ '/aboutme' | relative_url }}"><i class="fa fa-user"></i> About Me</a></li>
        {% if site.posts.size > 0 %}
          <li><a href="{{ site.posts.first.url | relative_url }}"><i class="fa fa-file-text"></i> Latest Post</a></li>
        {% endif %}
        <li><a href="#" onclick="scrollToTop()"><i class="fa fa-arrow-up"></i> Back to Top</a></li>
      </ul>
    </div>

    <!-- Archive by Month -->
    {% assign posts_by_month = site.posts | group_by_exp: "post", "post.date | date: '%Y-%m'" %}
    {% if posts_by_month.size > 0 %}
    <div class="sidebar-section">
      <h5><i class="fa fa-archive"></i> Archive</h5>
      <ul class="sidebar-list archive-list">
        {% for month in posts_by_month limit: 6 %}
          {% assign month_name = month.name | date: "%B %Y" %}
          <li>
            <a href="#" class="archive-link" data-month="{{ month.name }}">
              {{ month_name }}
              <span class="post-count">({{ month.items.size }})</span>
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}
  </div>
</div>

<!-- Sidebar Toggle Button -->
<button id="sidebar-toggle" class="sidebar-toggle" onclick="toggleSidebar()" title="Open navigation menu">
  <i class="fa fa-bars"></i>
</button>

<!-- Sidebar Overlay -->
<div id="sidebar-overlay" class="sidebar-overlay" onclick="closeSidebar()"></div>

<script>
function toggleSidebar() {
  const sidebar = document.getElementById('left-sidebar');
  const overlay = document.getElementById('sidebar-overlay');
  const toggle = document.getElementById('sidebar-toggle');
  
  if (sidebar.classList.contains('open')) {
    closeSidebar();
  } else {
    sidebar.classList.add('open');
    overlay.classList.add('active');
    toggle.style.left = '260px';
  }
}

function closeSidebar() {
  const sidebar = document.getElementById('left-sidebar');
  const overlay = document.getElementById('sidebar-overlay');
  const toggle = document.getElementById('sidebar-toggle');
  
  sidebar.classList.remove('open');
  overlay.classList.remove('active');
  toggle.style.left = '20px';
}

function scrollToTop() {
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
  closeSidebar();
}

// Tag filtering functionality
document.addEventListener('DOMContentLoaded', function() {
  const tagLinks = document.querySelectorAll('.tag-link');
  tagLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const tag = this.dataset.tag;
      // You can implement tag filtering here
      console.log('Filter by tag:', tag);
      closeSidebar();
    });
  });

  const archiveLinks = document.querySelectorAll('.archive-link');
  archiveLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const month = this.dataset.month;
      // You can implement month filtering here
      console.log('Filter by month:', month);
      closeSidebar();
    });
  });
});

// Close sidebar when pressing Escape key
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    closeSidebar();
  }
});
</script>